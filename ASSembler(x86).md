Использован сайт: http://www.ccfit.nsu.ru/~kireev/lab2/lab2com.htm
И нейронка https://t.me/gpt_lama_bot

---

Данный документ создан для справки по командам и доступным регистрам в языке Assembler. Документ может содержать неточности. Данный документ будет дополняться примерами

---

| Доступные регистры |
| ------------------ |
| eax                |
| ebx                |
| ecx                |
| edx                |
| esp                |
| ebp                |
| esi                |
| edi                |

---

**Список системных вызовов для Linux**

| Системные вызовы | Номер | Значение                                              |
| ---------------- | ----- | ----------------------------------------------------- |
| sys_exit         | 1     | Завершить процесс                                     |
| sys_fork         | 2     | Создать новый процесс                                 |
| sys_read         | 3     | Чтение из файла                                       |
| sys_write        | 4     | Запись в файл                                         |
| sys_open         | 5     | Открыть файл                                          |
| sys_close        | 6     | Закрыть файл                                          |
| sys_waitpid      | 7     | Ожидание завершения процесса                          |
| sys_execve       | 11    | Выполнение программы                                  |
| sys_chdir        | 12    | Смена директории                                      |
| sys_time         | 13    | Получение текущего времени                            |
| sys_mknod        | 14    | Создание спец. файла(узла)                            |
| sys_chmod        | 15    | Изменение прав доступа к файлу                        |
| sys_lseek        | 19    | Установить позицию в файле                            |
| sys_getpid       | 20    | Получение PID процесса                                |
| sys_mount        | 21    | Монтирование файловой системы                         |
| sys_unmount      | 22    | Отмонтирование файловой системы                       |
| sys_kill         | 37    | Отправка сигнала процессу                             |
| sys_rename       | 38    | Переименование файла                                  |
| sys_mkdir        | 39    | Создание директории                                   |
| sys_rmdir        | 40    | Удаление директории                                   |
| sys_dup          | 41    | Дублирование дескриптора файла                        |
| sys_pipe         | 42    | Создание канала (pipe)                                |
| sys_brk          | 45    | Изменение сегмента данных                             |
| sys_signal       | 48    | Установка обработчика сигнала                         |
| sys_setpgid      | 57    | Установка идентификатора группы процессов             |
| sys_getppid      | 64    | Получение PID родительского процесса                  |
| sys_setsid       | 66    | Создание новой сессии и группы процессов              |
| sys_gettimeofday | 78    | Получение текущего времени с точностью до микросекунд |
| sys_symlink      | 83    | Создание символической ссылки                         |
| sys_readlink     | 85    | Чтение символической ссылки                           |
| sys_mmap         | 90    | Проецирование файла в память                          |
| sys_munmap       | 91    | Удаление проецирования файла из памяти                |
| sys_ftuncate     | 93    | Урезание файла до указанного размера                  |
| sys_stat         | 106   | Получение информации о файле                          |
| sys_lstat        | 107   | Получение информации о символической ссылке           |
| sys_fstat        | 108   | Получение информации о файле по дескриптору           |

---

**Список системных вызовов для Windows**

| Системные вызовы        | Значение                              |
| ----------------------- | ------------------------------------- |
| ExitProcess             | Завершение процесса                   |
| CreateFile              | Создание/Открытие файла               |
| ReadFile                | Чтение из файла                       |
| WriteFile               | Запись в файл                         |
| CloseHandle             | Закрытие дескриптора объекта          |
| GetStdHandle            | Получение стандартного дескриптора    |
| SetConsoleTextAttribute | Установка атрибутов  текста в консоли |
| GetModuleHandle         | Получение дескриптора модуля          |
| GetProcAddress          | Получение адреса функции в DLL        |
| VirtualAlloc            | Выделение памяти                      |
| VirtualFree             | Освобождение выделенной памяти        |
 
---

**Список системных вызовов для macOS**

| Системные вызовы | Номер | Значение                               |
| ---------------- | ----- | -------------------------------------- |
| sys_exit         | 1     | Завершение процесса                    |
| sys_fork         | 2     | Создание нового процесса               |
| sys_read         | 0     | Чтение из файла                        |
| sys_write        | 1     | Запись в файл                          |
| sys_open         | 5     | Открыть файл                           |
| sys_close        | 6     | Закрыть файл                           |
| sys_execve       | 59    | Выполнение программы                   |
| sys_getpid       | 20    | Получение PID процесса                 |
| sys_kill         | 37    | Отправить сигнал процессу              |
| sys_mmap         | 197   | Проецирование в память                 |
| sys_munmap       | 73    | Удаление проецирования файла из памяти |

---

**Примеры**

Сложение
```
section .data
	num1 dd 5
	num2 dd 10
	result dd 0

section .text
	global _start

_start:
	mov eax, [num1]
	add eax, [num2]
	mov [result], eax
	
	mov eax, 1
	xor ebx, ebx
	int 0x80
```

Вычитание
```
section .data
	num1 dd 5
	num2 dd 10
	result dd 0

section .text
	global _start

_start:
	mov eax, [num1]
	sub eax, [num2]
	mov [result], eax
	
	mov eax, 1
	xor ebx, ebx
	int 0x80
```

Умножение
```
section .data
	num1 dd 5
	num2 dd 10
	result dd 0

section .text
	global _start
 
_start:
	mov eax, [num1]
	mov ebx, [num2]
	mul ebx
	mov [result], eax

	mov eax, 1
	xor ebx, ebxint 0x80
```

Деление
```
section .data
	num1 dd 10
	num2 dd 5
	quotient dd 0
	remainder dd 0

section .text
	global _start

_start:
	mov eax, [num1]
	mov ebx, [num2]
	xor edx, edx
	div ebx
	mov [quotient], eax
	mov [remainder], edx
	
	mov eax, 1
	xor ebx, ebx
	int 0x80
```

---





---

| Команды      | Пояснение                                             |
| ------------ | ----------------------------------------------------- |
| MOV          | Присваивание                                          |
| CMOVxx       | Условное присваивание                                 |
| XCHG         | Обмен значений                                        |
| BSWAP        | Перестановка байтов                                   |
| XADD         | Обмен и сложение                                      |
| CMPXCHG      | Сравнение и обмен                                     |
| CMPXCHG8B    | Сравнение и обмен 8 байтов                            |
| PUSH         | Поместить в стек                                      |
| POP          | Взять из стека                                        |
| PUSHA/PUSHAD | Поместить значения регистров общего назначения в стек |
| POPA/POPAD   | Взять значения регистров общего назначения из стека   |
| IN           | Прочитать из порта ввода/вывода                       |
| OUT          | Записать значение в порт ввода/вывода                 |
| CWD          | Преобразовать Word(16bit) в DWord(32bit)              |
| CDQ          | Преобразовать DWord(32bit) в QWord(64bit)             |
| CBE          | Преобразовать Byte(8bit) в Word(16bit)                |
| CWDE         | Преобразовать Word в DWord в регистре eax             |
| MOVSX        | Присвоить и расширить с учётом знака                  |
| MOVZX        | Присвоить и расширить с нулевым значением             |

---

| Двоичные арифм. команды | Пояснение             |
| ----------------------- | --------------------- |
| ADD                     | Сложение              |
| ADC                     | Сложение с переносом  |
| SUB                     | Вычитание             |
| SBB                     | Вычитание с заёмом    |
| IMUL                    | Знаковое умножение    |
| MUL                     | Беззнаковое умножение |
| IDIV                    | Знаковое деление      |
| DIV                     | Беззнаковое деление   |
| INC                     | Инкремент             |
| DEC                     | Декремент             |
| NEG                     | Смена знака           |
| CMP                     | Сравнение             |

---

| Двоично-десятичные арифм. команды | Пояснение                            |
| --------------------------------- | ------------------------------------ |
| DAA                               | Десятичная коррекция после сложения  |
| DAC                               | Десятичная коррекция после вычитания |
| AAA                               | ASCII коррекция после сложения       |
| AAS                               | ASCII коррекция после вычитания      |
| AAM                               | ASCII коррекция после умножения      |
| AAD                               | ASCII коррекция перед делением       |

---

| Логические | Пояснение                 |
| ---------- | ------------------------- |
| AND        | Побитовое И               |
| OR         | Побитовое ИЛИ             |
| XOR        | Побитовое исключающее ИЛИ |
| NOT        | Побитовое НЕ              |

---

| Команды побитового сдвига и вращения | Пояснение                             |
| ------------------------------------ | ------------------------------------- |
| SAR                                  | Арифметический сдвиг вправо           |
| SHR                                  | Логический сдвиг вправо               |
| SAL\SHL                              | Арифметический/логический сдвиг влево |
| SHRD                                 | Двойной сдвиг вправо                  |
| SHLD                                 | Двойной сдвиг влево                   |
| ROR                                  | Вращение вправо                       |
| ROL                                  | Вращение влево                        |
| RCR                                  | Вращение вправо через флаг переноса   |
| RCL                                  | Вращение влево через флаг переноса    |

| Команды для работы с битами и байтами | Пояснение                                  |
| ------------------------------------- | ------------------------------------------ |
| BT                                    | Проверка бита                              |
| BTS                                   | Проверка установки бита                    |
| BTR                                   | Проверка сброса бита                       |
| BTC                                   | Проверка и инверсия бита                   |
| BSF                                   | Проверка бита в прямом направлеии          |
| BSR                                   | Проверка бита в обратном направлении       |
| SETxx                                 | Установить значение в зависимости от флага |
| TEST                                  | Логическое сравнение                       |

---

| Команды передачи управления | Пояснение                                                   |
| --------------------------- | ----------------------------------------------------------- |
| JMP                         | Безуслвный переход                                          |
| Jxx                         | Условный переход                                            |
| JCXZ/JECXZ                  | Переход если cx/ecx = 0                                     |
| LOOP                        | Цикл со счётчиком в ecx                                     |
| LOOPZ/LOOPE                 | Цикл со счетчиком в ecx и выходом при нуле / равенстве      |
| LOOPNZ/LOOPNE               | Цикл со счетчиком в ecx и выходом при не нуле / неравенстве |
| CALL                        | Вызов подпрограммы                                          |
| RET                         | Возврат из подпрограммы                                     |
| IRET                        | Возврат из прерывания                                       |
| INT                         | Вызов программного прерывания                               |
| INTO                        | Вызов прерывания по переполнению                            |
| BOUND                       | Переход при выходе значения за заданные рамки               |
| ENTER                       | Высокоуровневый вход в процедуру                            |
| LEAVE                       | Высокоуровневый выход из процедуры                          |

| Команды работы со строками(последовательностями) | Пояснение                           |
| ------------------------------------------------ | ----------------------------------- |
| MOVS                                             | Перемещение строки                  |
| MOVSB                                            | Перемещение строки байтов           |
| MOVSW                                            | Перемещение строки слов             |
| MOVSD                                            | Перемещение строки двойных слов     |
| CMPS                                             | Сравнение строки                    |
| CMPSB                                            | Сравнение строки байтов             |
| CMPSW                                            | Сравнение строки слов               |
| CMPSD                                            | Сравнение строки двойных слов       |
| SCAS                                             | Проверка строки                     |
| SCASB                                            | Проверка строки байтов              |
| SCASW                                            | Проверка строки слов                |
| SCASD                                            | Проверка строки двойных слов        |
| LODS                                             | Чтение строки                       |
| LODSB                                            | Чтение строки байтов                |
| LODSW                                            | Чтение строки слов                  |
| LODSD                                            | Чтение строки двойных слов          |
| STOS                                             | Запись строки                       |
| STOSB                                            | Запись строки байтов                |
| STOSW                                            | Запись строки слов                  |
| STOSD                                            | Запись строки двойных слов          |
| REP                                              | Префикс повторения пока ecx = 0     |
| REPE/REPZ                                        | Префикс повторения пока 0           |
| REPNE/REPNZ                                      | Префикс повторения пока не 0        |
| INS                                              | Чтение из порта строки              |
| INSB                                             | Чтение из порта строки байтов       |
| INSW                                             | Чтение из порта строки слов         |
| INSD                                             | Чтение из порта строки двойных слов |
| OUT                                              | Запись в порт строки                |
| OUTB                                             | Запись в порт строки байтов         |
| OUTW                                             | Запись в порт строки слов           |
| OUTD                                             | Запись в порт строки двойных слов   |

---

| Команды управления флагами | Пояснение                   |
| -------------------------- | --------------------------- |
| STC                        | Установить флаг переноса    |
| CLC                        | Очистить флаг переноса      |
| CMC                        | Инвертировать флаг переноса |
| CLD                        | Очистить флаг направления   |
| STD                        | Установить флаг направления |
| LAHF                       | Загрузить флаги в ah        |
| SAHF                       | Записать ah в флаги         |
| PUSHF/PUSHFD               | Поместить EFLAGS в стек     |
| POPF/POPFD                 | Взять EFLAGS из стека       |
| STI                        | Установить флаг прерывания  |
| CLI                        | Очистить флаг прерывания    |

---

| Команды для работы с сегментными регистрами | Пояснение                                |
| ------------------------------------------- | ---------------------------------------- |
| LDS                                         | Загрузить дальний указатель используя ds |
| LES                                         | Загрузить дальний указатель используя es |
| LFS                                         | Загрузить дальний указатель используя fs |
| LGS                                         | Загрузить дальний указатель используя gs |
| LSS                                         | Загрузить дальний указатель используя ss |

---

| Дополнительные команды | Пояснение                   |
| ---------------------- | --------------------------- |
| LEA                    | Загрузить эффективный адрес |
| NOP                    | Нет операции                |
| UD2                    | Неопределённая инструкция   |
| XLAT/XLATB             | Табличная трансляция        |
| CPUID                  | Идентификация процессора    |

---

| Системные команды | Пояснение                                                         |
| ----------------- | ----------------------------------------------------------------- |
| LGDT              | Загрузить регистр глобальной таблицы дескрипторов (GDT)           |
| SGDT              | Сохранить регистр глобальной таблицы дескрипторов (GDT)           |
| LLDT              | Загрузить регистр локальной таблицы дескрипторов (GDT)            |
| SLDT              | Сохранить регистр локальной таблицы дескрипторов (GDT)            |
| LTR               | Загрузить регистр задачи                                          |
| STR               | Сохранить регистр задачи                                          |
| LIDT              | Загрузить регистр таблицы дескрипторов прерываний (IDT)           |
| SIDT              | Сохранить регистр таблицы дескрипторов прерываний (IDT)           |
| MOV               | Загрузка и сохранение управляющих регистров, отладочных регистров |
| LMSW              | Загрузить слово состояния машины                                  |
| SMSW              | Сохранить слово состояния машины                                  |
| CLTS              | Очистить флаг переключения задачи                                 |
| ARPL              | Согласовать запрошенный уровень привелегий                        |
| LAR               | Загрузить права доступа                                           |
| LSL               | Загрузить границу сегмента                                        |
| VERR              | Проверить сегмент на возможность чтения                           |
| VERW              | Проверить сегмент на возможность записи                           |
| INVD              | Очистить кэш без обратной записи                                  |
| WBINVD            | Очистить кэш с обратной записью                                   |
| INNVLPG           | Очистить элемент TLB                                              |
| LOCK              | Префикс: заблокировать шину                                       |
| HLT               | Остановить процессор                                              |
| RSM               | Возвратиться из режима системного управления                      |
| RDMSR             | Прочитать регистр, специфичный для модели                         |
| WRDMSR            | Записать регистр, специфичный для модели                          |
| RDPMC             | Прочитать счетчик производительности                              |
| RDTSC             | Прочитать счетчик меток реального времени                         |
| SYSENTER          | Быстрый переход к точке входа в коде на уровне привилегий 0       |
| SYSEXIT           | Быстрый возврат из кода на уровне привилегий 0 к коду на уровне 3 |

---

**Примеры**

